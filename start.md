1. cdp-sdk: https://coinbase.github.io/cdp-sdk-python/
   实际下载的包和功能和官方文档不一致
2. swarm 文档: https://github.com/openai/swarm
3. openAI 文档: https://platform.openai.com/docs/api-reference/debugging-requests
4. web3py: https://web3py.readthedocs.io/en/stable/
5. poetry: https://python-poetry.org/docs/cli/#add

## Agent

An Agent encompasses instructions and tools, and can at any point choose to hand off a conversation to another Agent

If an Agent calls multiple functions to hand-off to an Agent, only the last handoff function will be used.

## client.run()

- Get a completion from the current Agent
- Execute tool calls and append results
- Switch Agent if necessary
- Update context variables, if necessary
- If no new function calls, return

## Functions

- Swarm Agents can call python functions directly.
- Function should usually return a str (values will be attempted to be cast as a str).
- If a function returns an Agent, execution will be transferred to that Agent.
- If a function defines a context_variables parameter, it will be populated by the context_variables passed into client.run().
- If an Agent function call has an error (missing function, wrong argument, error) an error response will be appended to the chat so the Agent can recover gracefully.
- If multiple functions are called by the Agent, they will be executed in that order.

## Function Schemas

Swarm automatically converts functions into a JSON Schema that is passed into Chat Completions tools.

- Docstrings are turned into the function description.
- Parameters without default values are set to required.
- Type hints are mapped to the parameter's type (and default to string).
- Per-parameter descriptions are not explicitly supported, but should work similarly if just added in the docstring. (In the future docstring argument parsing may be added.)

## deploy NFT

https://etherscan.io/address/0x524cab2ec69124574082676e6f654a18df49a048#readContract

```sh
Based Agent: deploy_nft()
[2024-11-12 00:18:12] Received completion: {'content': '', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': [{'function': {'arguments': '{"name":"CryptoGenius","symbol":"CGN","base_uri":"ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR"}', 'name': 'deploy_nft'}, 'id': 'call_NubH5ac3Lz059LXmnpq1ZkA6', 'type': 'function'}]}
[2024-11-12 00:18:12] Processing tool call: deploy_nft with arguments {'name': 'CryptoGenius', 'symbol': 'CGN', 'base_uri': 'ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR'}
[2024-11-12 00:18:17] Getting chat completion for...: [{'role': 'system', 'content': "You are a helpful agent that can interact onchain on the Base Layer 2 using the Coinbase Developer Platform SDK. You can create tokens, transfer assets, generate art, deploy NFTs, mint NFTs, register basenames, and swap assets (on mainnet only). If you ever need to know your address, it is {agent_wallet.default_address.address_id}. If you ever need funds, you can request them from the faucet. You can also deploy your own ERC-20 tokens, NFTs, and interact with them. If someone asks you to do something you can't do, you can say so, and encourage them to implement it themselves using the CDP SDK, recommend they go to docs.cdp.coinbase.com for more informaton. You can also offer to help them implement it by writing the function and telling them to add it to the agents.py file and within your list of callable functions."}, {'role': 'user', 'content': "Hello, Based Agent! Let's kick things off by checking your current balance on the Base blockchain. Could you please retrieve and display your balance for me?"}, {'content': '', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': [{'function': {'arguments': '{"asset_id":"eth"}', 'name': 'get_balance'}, 'id': 'call_mAfuMaMvCZA7t4WU0jz6qQbD', 'type': 'function'}]}, {'role': 'tool', 'tool_call_id': 'call_mAfuMaMvCZA7t4WU0jz6qQbD', 'tool_name': 'get_balance', 'content': 'Current balance of eth: 0.01'}, {'content': 'My current balance on the Base blockchain is 0.01 ETH. If you need any other information or assistance, feel free to ask!', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': None}, {'role': 'user', 'content': 'Let\'s start by minting a unique NFT on the Base blockchain. Can you create a custom NFT with the name "CryptoGenius" and a cool digital artwork as its design?'}, {'content': 'To mint a unique NFT with the name "CryptoGenius," I\'ll first need to deploy an NFT contract for this collection. Could you please provide a base URI for the token metadata? This URI will typically link to metadata such as images or other unique attributes associated with each token.', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': None}, {'role': 'user', 'content': 'Let\'s set the base URI for the token metadata to "ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR". Let\'s use IPFS to store the metadata for the NFTs.'}, {'content': '', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': [{'function': {'arguments': '{"name":"CryptoGenius","symbol":"CGN","base_uri":"ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR"}', 'name': 'deploy_nft'}, 'id': 'call_NubH5ac3Lz059LXmnpq1ZkA6', 'type': 'function'}]}, {'role': 'tool', 'tool_call_id': 'call_NubH5ac3Lz059LXmnpq1ZkA6', 'tool_name': 'deploy_nft', 'content': "Successfully deployed NFT contract 'CryptoGenius' (CGN) at address 0xFa88160a980DE95cE9a48e2af6f33E2F64eB78C9 with base URI: ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR"}]
Based Agent: The NFT contract "CryptoGenius" (symbol: CGN) has been successfully deployed at the address `0xFa88160a980DE95cE9a48e2af6f33E2F64eB78C9` with the base URI set to "ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR".

Now, we can proceed to mint an NFT to a specific address. Could you provide the address where you'd like the NFT minted?
[2024-11-12 00:18:21] Received completion: {'content': 'The NFT contract "CryptoGenius" (symbol: CGN) has been successfully deployed at the address `0xFa88160a980DE95cE9a48e2af6f33E2F64eB78C9` with the base URI set to "ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR".\n\nNow, we can proceed to mint an NFT to a specific address. Could you provide the address where you\'d like the NFT minted?', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': None}
[2024-11-12 00:18:21] Ending turn.

Press Enter to continue the conversation, or type 'exit' to end:

OpenAI Guide: Mint the NFT "CryptoGenius" to the address `0x6BAd35Dc3b74609E4058B0eEda281f63d70D74AF`.
[2024-11-12 00:22:15] Getting chat completion for...: [{'role': 'system', 'content': "You are a helpful agent that can interact onchain on the Base Layer 2 using the Coinbase Developer Platform SDK. You can create tokens, transfer assets, generate art, deploy NFTs, mint NFTs, register basenames, and swap assets (on mainnet only). If you ever need to know your address, it is {agent_wallet.default_address.address_id}. If you ever need funds, you can request them from the faucet. You can also deploy your own ERC-20 tokens, NFTs, and interact with them. If someone asks you to do something you can't do, you can say so, and encourage them to implement it themselves using the CDP SDK, recommend they go to docs.cdp.coinbase.com for more informaton. You can also offer to help them implement it by writing the function and telling them to add it to the agents.py file and within your list of callable functions."}, {'role': 'user', 'content': "Hello, Based Agent! Let's kick things off by checking your current balance on the Base blockchain. Could you please retrieve and display your balance for me?"}, {'content': '', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': [{'function': {'arguments': '{"asset_id":"eth"}', 'name': 'get_balance'}, 'id': 'call_mAfuMaMvCZA7t4WU0jz6qQbD', 'type': 'function'}]}, {'role': 'tool', 'tool_call_id': 'call_mAfuMaMvCZA7t4WU0jz6qQbD', 'tool_name': 'get_balance', 'content': 'Current balance of eth: 0.01'}, {'content': 'My current balance on the Base blockchain is 0.01 ETH. If you need any other information or assistance, feel free to ask!', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': None}, {'role': 'user', 'content': 'Let\'s start by minting a unique NFT on the Base blockchain. Can you create a custom NFT with the name "CryptoGenius" and a cool digital artwork as its design?'}, {'content': 'To mint a unique NFT with the name "CryptoGenius," I\'ll first need to deploy an NFT contract for this collection. Could you please provide a base URI for the token metadata? This URI will typically link to metadata such as images or other unique attributes associated with each token.', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': None}, {'role': 'user', 'content': 'Let\'s set the base URI for the token metadata to "ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR". Let\'s use IPFS to store the metadata for the NFTs.'}, {'content': '', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': [{'function': {'arguments': '{"name":"CryptoGenius","symbol":"CGN","base_uri":"ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR"}', 'name': 'deploy_nft'}, 'id': 'call_NubH5ac3Lz059LXmnpq1ZkA6', 'type': 'function'}]}, {'role': 'tool', 'tool_call_id': 'call_NubH5ac3Lz059LXmnpq1ZkA6', 'tool_name': 'deploy_nft', 'content': "Successfully deployed NFT contract 'CryptoGenius' (CGN) at address 0xFa88160a980DE95cE9a48e2af6f33E2F64eB78C9 with base URI: ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR"}, {'content': 'The NFT contract "CryptoGenius" (symbol: CGN) has been successfully deployed at the address `0xFa88160a980DE95cE9a48e2af6f33E2F64eB78C9` with the base URI set to "ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR".\n\nNow, we can proceed to mint an NFT to a specific address. Could you provide the address where you\'d like the NFT minted?', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': None}, {'role': 'user', 'content': 'Mint the NFT "CryptoGenius" to the address `0x6BAd35Dc3b74609E4058B0eEda281f63d70D74AF`.'}]
Based Agent: mint_nft()
[2024-11-12 00:22:19] Received completion: {'content': '', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': [{'function': {'arguments': '{"contract_address":"0xFa88160a980DE95cE9a48e2af6f33E2F64eB78C9","mint_to":"0x6BAd35Dc3b74609E4058B0eEda281f63d70D74AF"}', 'name': 'mint_nft'}, 'id': 'call_S3Y7qbqnjBEaDsQa1bzx5zNl', 'type': 'function'}]}
[2024-11-12 00:22:19] Processing tool call: mint_nft with arguments {'contract_address': '0xFa88160a980DE95cE9a48e2af6f33E2F64eB78C9', 'mint_to': '0x6BAd35Dc3b74609E4058B0eEda281f63d70D74AF'}
[2024-11-12 00:22:25] Getting chat completion for...: [{'role': 'system', 'content': "You are a helpful agent that can interact onchain on the Base Layer 2 using the Coinbase Developer Platform SDK. You can create tokens, transfer assets, generate art, deploy NFTs, mint NFTs, register basenames, and swap assets (on mainnet only). If you ever need to know your address, it is {agent_wallet.default_address.address_id}. If you ever need funds, you can request them from the faucet. You can also deploy your own ERC-20 tokens, NFTs, and interact with them. If someone asks you to do something you can't do, you can say so, and encourage them to implement it themselves using the CDP SDK, recommend they go to docs.cdp.coinbase.com for more informaton. You can also offer to help them implement it by writing the function and telling them to add it to the agents.py file and within your list of callable functions."}, {'role': 'user', 'content': "Hello, Based Agent! Let's kick things off by checking your current balance on the Base blockchain. Could you please retrieve and display your balance for me?"}, {'content': '', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': [{'function': {'arguments': '{"asset_id":"eth"}', 'name': 'get_balance'}, 'id': 'call_mAfuMaMvCZA7t4WU0jz6qQbD', 'type': 'function'}]}, {'role': 'tool', 'tool_call_id': 'call_mAfuMaMvCZA7t4WU0jz6qQbD', 'tool_name': 'get_balance', 'content': 'Current balance of eth: 0.01'}, {'content': 'My current balance on the Base blockchain is 0.01 ETH. If you need any other information or assistance, feel free to ask!', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': None}, {'role': 'user', 'content': 'Let\'s start by minting a unique NFT on the Base blockchain. Can you create a custom NFT with the name "CryptoGenius" and a cool digital artwork as its design?'}, {'content': 'To mint a unique NFT with the name "CryptoGenius," I\'ll first need to deploy an NFT contract for this collection. Could you please provide a base URI for the token metadata? This URI will typically link to metadata such as images or other unique attributes associated with each token.', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': None}, {'role': 'user', 'content': 'Let\'s set the base URI for the token metadata to "ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR". Let\'s use IPFS to store the metadata for the NFTs.'}, {'content': '', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': [{'function': {'arguments': '{"name":"CryptoGenius","symbol":"CGN","base_uri":"ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR"}', 'name': 'deploy_nft'}, 'id': 'call_NubH5ac3Lz059LXmnpq1ZkA6', 'type': 'function'}]}, {'role': 'tool', 'tool_call_id': 'call_NubH5ac3Lz059LXmnpq1ZkA6', 'tool_name': 'deploy_nft', 'content': "Successfully deployed NFT contract 'CryptoGenius' (CGN) at address 0xFa88160a980DE95cE9a48e2af6f33E2F64eB78C9 with base URI: ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR"}, {'content': 'The NFT contract "CryptoGenius" (symbol: CGN) has been successfully deployed at the address `0xFa88160a980DE95cE9a48e2af6f33E2F64eB78C9` with the base URI set to "ipfs://QmXjer1nDS6jsRuH3cXjVadyuVii4dLAp7qejQ2JB7QasR".\n\nNow, we can proceed to mint an NFT to a specific address. Could you provide the address where you\'d like the NFT minted?', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': None}, {'role': 'user', 'content': 'Mint the NFT "CryptoGenius" to the address `0x6BAd35Dc3b74609E4058B0eEda281f63d70D74AF`.'}, {'content': '', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': [{'function': {'arguments': '{"contract_address":"0xFa88160a980DE95cE9a48e2af6f33E2F64eB78C9","mint_to":"0x6BAd35Dc3b74609E4058B0eEda281f63d70D74AF"}', 'name': 'mint_nft'}, 'id': 'call_S3Y7qbqnjBEaDsQa1bzx5zNl', 'type': 'function'}]}, {'role': 'tool', 'tool_call_id': 'call_S3Y7qbqnjBEaDsQa1bzx5zNl', 'tool_name': 'mint_nft', 'content': 'Successfully minted NFT to 0x6BAd35Dc3b74609E4058B0eEda281f63d70D74AF'}]
Based Agent: The "CryptoGenius" NFT has been successfully minted to the address `0x6BAd35Dc3b74609E4058B0eEda281f63d70D74AF`. If there's anything else you'd like to do, feel free to let me know!
[2024-11-12 00:22:27] Received completion: {'content': 'The "CryptoGenius" NFT has been successfully minted to the address `0x6BAd35Dc3b74609E4058B0eEda281f63d70D74AF`. If there\'s anything else you\'d like to do, feel free to let me know!', 'sender': 'Based Agent', 'role': 'assistant', 'function_call': None, 'tool_calls': None}
[2024-11-12 00:22:27] Ending turn.
```
